obsidian://open?vault=Professional_Assembly_Language&file=Part_1%2FChapter_1_What_is_assembly_language%2F1.1_Processor_Instructions%2F1.1.2_Instruction_code_format%2F1.1.2_Instruction_code_format

# 1.1.2 指令码格式

Intel IA-32 系列微处理器包括现在IBM平台的微型计算机所使用的所有当前类型的微处理器（参见第2章），还包括流行的奔腾系列微处理器。IA-32 系列的微处理器使用专门格式的指令码，了解这些指令的格式对汇编语言程序设计将有所帮助。

---

IA-32指令码格式由四个主要部分构成：
- 可选的指令前缀
- 操作码（opcode）
- 可选的操作符
- 可选的数据元素

---

图1-2是IA-32指令码格式的布局。
![[Pasted image 20220625223802.png]]

---

每个部分都用于完整地为处理器定义要执行的特定指令。

---

Intel的奔腾处理器系列不是使用IA-32指令码格式的唯一处理器芯片系列。AMD 公司生产的一系列芯片也完全兼容 Intel IA-32 指令码格式。

---

1. 操作码

如图1-2所示，IA-32 指令码格式中唯一必须的部分是操作码。每个指令码都必须包含操作码，它定义由处理器执行的基本功能或任务。

![[Pasted image 20220625223802.png]]

操作码的长度在1到3字节之间，它唯一地定义要执行的功能。例如，2字节的操作码OF A2定义IA-32 CPUID指令。当处理器执行这个指令码时，它返回不同寄存器中关于微处理器的特定信息。然后，程序员可以使用其他的指令码从处理器寄存器中提取信息，以便确定运行程序的微处理器的类型和型号。

---

寄存器是处理器芯片之内的组件，用于临时存储处理器正在处理的数据。寄存器的详细信息将在第2章“IA-32平台”中讲解。

2. 指令前缀

指令前缀可以包含1个到4个修改操作码行为的1字节前缀。按照前缀的功能，这些前缀被分为4个组。修改操作码时，每个组的前缀一次只能使用一个（因此最多有4个前缀字节）。这4个前缀组如下：
- 锁定前缀和重复前缀
- 段覆盖前缀和分支提示前缀
- 操作数长度覆盖前缀
- 地址长度覆盖前缀

---

锁定前缀表示指令将独占地使用共享内存区域。这对于多处理器和超线程系统非常重要。

重复前缀用于表示重复的功能（常常在处理字符串时使用）。

---

段覆盖前缀定义可以覆盖定义了的段寄存器值的指令（这将在第2章中更加详细地讲解）。

分支提示前缀尝试向处理器提供程序在条件跳转语句中最可能的路径的线索（这同预报分支的硬件一起使用）。

---

操作数长度覆盖前缀通知处理器，程序将在这个操作码之内切换16位和32位的操作数长度。这使程序可以在使用大长度的操作数时警告处理器，帮助加快对寄存器的数据赋值。